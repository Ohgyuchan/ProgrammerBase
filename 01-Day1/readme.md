# Day 1

GBC 첫번째 과정 **Programmer Base** 의 1일차 내용입니다.

---

# Docker

> 참고 : https://subicura.com/2017/01/19/docker-guide-for-beginners-1.html

- **도커(docker) : 컨테이너 기반의 오프소스 가상화 플랫폼이다.**

가상화 기술은 기존의 `vmware` 나 `VirtualBox` 로 많이 체험해보았을 거라고 예상됩니다. 안 해보셨어도 상관없습니다. 이제부터 이러한 기존 가상화 기술이 아닌 최신 가상화 기술을 배울 것입니다. 이 기존 가상화 기술은 `OS` 자체를 가상화시켜서 사용할 수 있게 해주었는데, 가령 윈도우나 맥 OS 에서 `Ubuntu` 리눅스를 사용할 수 있게 해준 것입니다.

![](https://subicura.com/assets/article_images/2017-01-19-docker-guide-for-beginners-1/vm-vs-docker.png)

기존 가상화기술이 전체 `OS` 를 매번 새로 설치해야 하고 필요한 환경을 설정해주어야 하는 불편함이 있는 반면 도커는 위 그림과 같이 프로세스를 가상화시킵니다.

그렇게 가상화된 프로세스가 도커에서 이미지와 컨테이너라는 개념으로 불립니다. 이미지란 컨테이너 실행에 필요한 모든 파일과 설정값을 갖고 있는 모델이고, 컨테이너란 이미지를 실행시킨 것입니다. 

도커 이미지는 [도커 허브](https://hub.docker.com/)에 등록해서 다른 사람이 사용하게 할 수 있습니다.

## 도커의 중요성

이 도커는 2013년 `PyCon` 에서 dotCloud 창업자인 Solomon Hykes 가 **The future of Linux Containers** 에서 처음 알려졌는데, 그 유용성이 증명되면서 2014년 마이크로소프트가 도커를 4조원에 인수하려 하기도 했습니다.

특히 구글에서는 모든 서비스들이 컨테이너로 동작하고 매주 20억 개의 컨테이너를 구동한다고 합니다. 또 우리나라의 구글이라 불리우는 카카오에서도 카카오톡을 컨테이너로 운영중이고 다음(Daum), 멜론(Melon) 도 서비스를 컨테이너로 운영중이라고 하니까 아직 도커가 뭔진 모르겠지만 엄청 중요한 기술이고 배우게 되면 개발자로서 엄청 좋을 것 같다는 느낌을 받을 수 있겠죠?

여기에서는 다른 배울 것들도 많아서 도커의 유용성과 깊은 의미에 관하여 자세히 설명하지 않을 것입니다. 하지만 **GBC** 가 끝나고 시간이 좀 남으실 때 

1. https://subicura.com/2017/01/19/docker-guide-for-beginners-1.html

2. https://subicura.com/2017/01/19/docker-guide-for-beginners-2.html

3. https://subicura.com/2017/02/10/docker-guide-for-beginners-create-image-and-deploy.html

위 블로그 연재글을 읽으시면서 도커에 대하여 알아보시길 **강력하게 강력하게** 추천합니다. 저는 첫번째 글을 읽고 도커에 매료되서 3번째 연재글까지 그 자리에서 다 읽고 실습까지 해봤었는데, 다 읽고 실습까지 해보는데에 4~5시간 정도 걸렸던 것 같습니다. 고작, 최대 5시간만 투자하면 최신 기술 중 가장 핫하고 트렌디한 기술을 익힐 수 있는데, 바로 투자하는 것이 좋겠죠? 

## 도커 설치

> 참고 : https://subicura.com/2017/01/19/docker-guide-for-beginners-2.html

만약 ~~없을 가능성이 높을테지만~~ 컴퓨터 운영체제로 `Linux` 를 사용하는 분이 있다면 당신은 전세계 컴퓨터 사용자 중 **`1.63%`** 의 사용자이기 때문에 스스로 도커를 설치할 수 있다고 믿습니다. 

### Windows 도커 설치

1. 먼저 윈도우 시스템을 홈 에디션을 사용하고 있다면 에듀케이션으로 업그레이드 하셔야 합니다. 그렇지 않으면 도커 설치가 제대로 되지 않습니다. 한동대생이라면 누구든지 윈도우 에듀케이션 제품키를 무료로 제공받을 수 있기 때문에 에듀케이션으로 쉽게 버전업을 할 수 있습니다.

    - 만약 윈도우 프로를(~~금수저..~~) 사용하고 계시다면 도커 설치는 문제 없으니 2단계로 넘어가셔도 괜찮습니다.

    - 히즈넷에 로그인하여 [이 링크](https://hisnet.handong.edu/itsupport/software/software14_01.php) 에 접속하셔서 윈도우 10 을 클릭한 후 제품키를 무료로 구매해주세요. 

    - 그리고 윈도우 제품키를 구매한 에듀케이션 제품키로 변경하면 됩니다.

2. [이 링크](https://hub.docker.com/editions/community/docker-ce-desktop-windows) 에서 도커 설치파일을 다운로드 받아서 설치하세요.

### MacOS 도커 설치

1. 맥은 단순히 [이 링크](https://hub.docker.com/editions/community/docker-ce-desktop-mac) 에서 도커 설치파일을 다운로드 받아 설치하면 됩니다.

    - 제가 유일하게 맥에서만 직접 도커를 설치해본 경험이 없어서 무슨 장애물이 있을지 예상이 안되지만 일단 설치에 문제가 있으면 저에게 질문을 주세요.

## 도커 초간단 사용법 

도커란 세팅된 이미지를 컨테이너로 실행하는 가상화 플랫폼이라고 했습니다. 그래서 도커에 수많은 기능이 있지만 여기에서는 단순히 컨테이너를 (1) 실행하고 종료하고 (2) 컨테이너와 이미지 상태를 확인하고 (3) 재실행하는 방법을 간단히 알아보겠습니다. 즉, 실습에 필요한 최소 기능만을 알아보는 것입니다. 도커를 성공적으로 설치하셨다면 터미널을 열어서 다음 명령어를 실행해봅시다. 

### 컨테이너 실행하고 종료하기

```shell
$ docker run -it ubuntu
```

이 명령어는 `ubuntu` 리눅스의 이미지가 로컬에 있는지 찾고, 없으면 [도커 허브](https://hub.docker.com/)에서 찾아서 다운로드한 다음 실행까지 시켜주는 명령어입니다. 그래서 처음 실행할 때는 이미지를 다운로드하느라 시간이 좀 걸리지만 그 다음에 실행할 때부터는 곧 바로 우분투 리눅스 컨테이너로 접속되죠.

- **`docker run <OPTIONS> <IMAGE>` : 컨테이너를 다운로드하고 실행한다.**

  - 주어진 시간이 매우 제한되어 있기 때문에 옵션 `-it` 의 의미를 자세히 설명하지는 않겠습니다. 그 의미가 궁금하다면 스스로 찾아보시거나 위에 제가 추천해드린 블로그 연재글을 보는 걸 다시 한 번 추천합니다.

이제 모두들 우분투 리눅스 시스템에 접속하셨을 거라고 믿고 시험삼아 지금 실행된 우분투 시스템의 버전을 확인해보겠습니다. 아직 명령어의 의미를 몰라도 됩니다. 그냥 다음 명령어를 실행해보세요.

```shell
$ cat /etc/os-release
NAME="Ubuntu"
VERSION="20.04 LTS (Focal Fossa)"
...
```

저는 위와 같은 실행결과가 나왔습니다. 우분투 `20.04` 버전이네요.

이제 파일 하나를 생성해보겠습니다. 마찬가지로 명령어 의미를 모르셔도 됩니다. 그냥 따라해보세요.

```shell
$ cd
$ touch test.txt
```

위 두 명령어는 홈 디렉토리로 이동하고 `test.txt` 파일을 생성합니다. 그리고 `ls` 명령어를 실행해보면 파일 목록 중에 `test.txt` 파일이 생성되어 있음을 알 수 있습니다.

이제 컨테이너를 종료해봅시다. 단순히 `exit` 명령어를 입력하면 됩니다.

```shell
$ exit 
```

### 컨테이너와 이미지 상태 확인하기

이제 `docker images` 명령어를 실행해봅시다. 

```shell
$ docker images
REPOSITORY                 TAG                 IMAGE ID            CREATED             SIZE
ubuntu                     latest              1d622ef86b13        8 days ago          73.9MB
ccss17/torch-notebook      latest              5b354756345a        2 months ago        7.49GB
ccss17/security-tutorial   latest              4cf8b475c7f7        3 months ago        1.15GB
```

이 명령어는 로컬에 다운로드된 도커 이미지의 목록을 출력해줍니다. 저는 위와 같은 실행결과가 나오네요. 도커를 처음 실행해보신 여러분은 아마 이미지가 `ubuntu` 밖에 없을 겁니다.

- **`docker images` : 로컬에 다운로드된 도커 이미지 목록을 출력한다.**

이제 다음 명령어를 실행해보세요.

```shell
$ docker ps -a
CONTAINER ID        IMAGE                      COMMAND                  CREATED             STATUS                    PORTS               NAMES
3a1998563b0e        ubuntu                     "/bin/bash"              3 seconds ago       Exited (0) 1 second ago                       distracted_shirley
...
```

제가 실행한 결과는 위와 같았는데 이미지 이름이 `ubuntu` 인걸로 보아 우리가 방금 실행했던 우분투 컨테이너라는 것을 알 수 있네요. `docker ps` 는 `docker images` 가 이미지 목록을 출력하는 것과 달리 컨테이너 목록을 출력합니다.

- **`docker ps <OPTIONS>` : 도커 컨테이너 목록을 출력한다.**

  - `-a` 옵션을 붙히면 종료된 컨테이너도 출력된다.

그러면 이 컨테이너는 언제든지 다시 실행될 수 있는 상태입니다. 저는 몇개의 컨테이너가 더 출력되었지만 도커를 처음 설치하고 실행하신 여러분은 `ubuntu` 컨테이너밖에 출력되지 않을 겁니다. 이 컨테이너에는 이전에 작업한 데이터들이 모두 저장되어 있습니다.

### 컨테이너와 이미지 상태 확인하기

이제 다음 명령어로 종료시켰던 `ubuntu` 컨테이너를 다시 실행해보세요.

```shell
$ docker start -ai 3a1998563b0e
```

이때 중요한 것은 `3a1998563b0e` 의 값은 사람마다 다를 수 있습니다. 이 값에는 `docker ps -a` 명령어로 확인했었던 `ubuntu` 컨테이너의 아이디를 대입해주세요. 그러면 종료되었던 컨테이너를 재실행 할 수 있습니다. 

- **`docker start <OPTIONS> <CONTAINER>` : 종료된 컨테이너를 다시 실행합니다.**

  - 컨테이너 아이디로 `3a1998563b0e` 를 전부 다 입력했지만 사실은 만약 컨테이너 구별만 될 수 있다면

    ```shell
    docker start -ai 3
    ```
  
    와 같이 `3` 만 입력해도 됩니다. 하지만 또 다른 컨테이너의 아이디어 맨 앞자리가 `3` 이라면 구별이 안되기 때문에 `3a` 를 입력해야 합니다. 요점은 구별되기만 하면 컨테이너 아이디를 앞에서부터 짧게 입력해도 된다는 것.

  - `-ai` 옵션으로 컨테이너에 접속하여 터미널처럼 사용할 수 있게 됩니다. 역시 시간관계상 자세한 설명은 하지 않고 그냥 컨테이너를 재실행할 때 터미널로 접속해서 사용할 수 있게 하는 옵션이라고만 하고 넘어가겠습니다. 

  - 자세한 설명과 그 이외의 옵션이 궁금하신 분들은 https://docs.docker.com/engine/reference/commandline/start/ 를 참고하세요.

이제 우분투 컨테이너에 접속되었다면 `cd && ls` 을 실행해보세요.

```shell
$ cd && ls
test.txt
```

그러면 위와 같이 조금 전에 생성했었던 `test.txt` 파일이 그대로 잘 남아있는 것을 확인할 수 있네요. 컨테이너가 종료되어도 다시 실행하니까 작업했던 데이터가 남아있어서 다행입니다.

# 도커 요약 

| 도커 명령어 | 하는 일 |
|:---|:---|
| **`docker run <OPTIONS> <IMAGE>`** | 컨테이너를 다운로드하고 실행한다. |
| **`docker images`** | 로컬에 다운로드된 도커 이미지 목록을 출력한다.|
| **`docker ps <OPTIONS>`** | 도커 컨테이너 목록을 출력한다.|
| **`docker start <OPTIONS> <CONTAINER>`** | 종료된 컨테이너를 다시 실행합니다. |

---

# 리눅스 교재 읽고 실습하기

지금까지의 **GBC 리눅스** 과정은 가상머신으로 실습을 진행했지만, 지금부터는 도커를 사용하여 진행해보도록 하겠습니다.

교재를 읽으며 실습을 하기 전에 중요한 사전작업이 하나 있습니다. 먼저 우분투 컨테이너에 접속하셔서 다음 명령어들을 실행해주세요. 

```shell
$ cd              # 홈 디렉토리로 이동합니다.
$ unminimize      # "Would you like to continue? [y/N]" 이 뜨면 'y' 를 입력하세요!
$ apt update
$ apt install -y man file git
```

우분투 도커 이미지는 오버헤드를 극한으로 최소화하기 위하여 필요없는 패키지를 과감히 삭제해버린 매우 가벼운 운영체제입니다. 따라서 원래의 우분투 환경과 비슷하게 만들어서 실습을 원활하게 할 수 있기 위하여 필요 패키지를 설치해주어야 합니다.

이제 교재에서 다음 분량을 읽고 우분투 도커 컨테이너에서 실습해주세요. 사실 너무 열심히 읽지 않아도 됩니다. 즉, 막 외우려고 애쓰지 않아도 된다는 뜻입니다. 다만 꼭 "정독" 을 하시고 한번쯤 책에 있는 실습을 따라해주세요. 

## Chapter 01

- **20p ~ 34p 읽기**

  - 리눅스의 시작, 리눅스의 발전과정, GNU 프로젝트, 리눅스와 유닉스, 리눅스 배포판, 우분투 리눅스, 리눅스의 일반적인 특징, 리눅스의 구조

- **62p ~ 68p 읽고 실습하기**

  - 프롬프트 기호와 홈 디렉터리, 명령 행 편집 방법, 명령의 구조, 명령 사용법, 기초 명령 사용법

## Chapter 02

- **76p ~ 93p 읽고 실습하기**

  - 파일의 종류, 디렉터리 계층 구조, 절대 경로명과 상대 경로명, 파일과 디렉터리 이름의 규칙, 현재 디렉터리 확인하기, 디렉터리 이동하기, 디렉터리 내용 보기, 디렉터리 만들기, 디렉터리 삭제하기

- **96p ~ 101p 읽고 실습하기**

  - 파일 내용 연속 출력하기, 화면 단위로 파일 내용 출력하기, 개선된 화면 단위 파일 내용 출력하기, 파일 뒷부분 출력하기

- **104p ~ 113p 읽고 실습하기**

  - 파일 복사하기, 파일 이동하기, 파일 삭제하기

- **115p ~ 120p 읽고 실습하기**

  - 파일 링크

- **122p ~ 128p 읽고 실습하기**

  - 유용한 파일 관련 명령
